# 構造設計

このファイルは、開発環境のフォルダの配置, ファイルの位置付け(ファイル分けの指針), メンバの位置付け(メンバの機能分けの指針) などを記します。

このフォルダに関しての説明は、[`README.md`](./README.md) に記述しています。

## 目次

- [構造設計](#構造設計)
  - [フォルダの構成](#フォルダの構成)
    - [全般のフォルダ構成](#全般のフォルダ構成)
    - [HTMLの開発に関するフォルダ, ファイル構成](#htmlの開発に関するフォルダ-ファイル構成)
    - [CSSの開発に関するフォルダ構成](#cssの開発に関するフォルダ構成)
    - [CSSの開発に関するファイル構成](#cssの開発に関するファイル構成)
    - [CSSの開発に関するメンバ構成](#cssの開発に関するメンバ構成)
  - [補足](#補足)
  - [作成者](#作成者)

## フォルダの構成

### 全般のフォルダ構成

1. HTML, CSS, JavaScript などの成果物毎で開発資源用のファルダを分けます。
2. 成果物の出力用のフォルダを用意します。そのファルダ構成は、運用と同等の名称と相対位置とします。
3. 生成の為のエントリーポイント用のフォルダを用意します。そのフォルダ構成は、一括処理を意識してツール毎に分けます。
4. `README.md`以外の説明用のファイルを纏めるフォルダを用意します。

- Dest - *2: 成果物の出力用のフォルダ
- Document - *4: 説明用のフォルダ
- Pug - *1: HTMLの開発資源用のファルダ
- Sass - *1: CSSの開発資源用のファルダ
- Src - *3: エントリーポイント用のフォルダ
- Typescript - *1: JavaScriptの開発資源用のファルダ

### HTMLの開発に関するフォルダ, ファイル構成

1. 開発資源は CSSの開発に合わせる。
2. そもそもの Pugによる HTML 開発の目的が、クラス属性 つまり CSS のクラスセレクタとの容易な同期です。

### CSSの開発に関するフォルダ構成

1. CSS の開発では、FLOCSS という CSS設計手法 を意識して行います。
2. 役割分けを行います。それぞれを**レイヤー**と呼び、フォルダに割り当てます。同一レイヤー内で異なるモジュールを併用する事は出来ない、各レイヤーは以下の順で上書き(併用)する事が出来る設計です。
    1. **Global**レイヤー: 基本的なメンバを定義します。FLOCSS にはありません。主に自作の共通関数を想定しています。CSS を意識しない基本的なものだけです。
    2. **Foundation**レイヤー: デフォルトスタイルの初期化や、プロジェクトにおける基本的なスタイルを定義します。
    3. **Layout**レイヤー: ページを構成するプロジェクト共通のコンテナーブロックのスタイルを定義します。
    4. **Object**レイヤー: プロジェクトにおける繰り返されるビジュアルパターンをすべて定義します。
        1. **Component**レイヤー: 再利用できるパターンとして、小さな単位の**モジュール**を定義します。
        2. **Project**レイヤー: プロジェクト固有のパターンであり、いくつかのComponentと、それに該当しない要素によって構成されるものを定義します。
        3. **Utility**レイヤー: ComponentとProjectレイヤーのObjectのモディファイアで解決することが難しい・適切では無い、わずかなスタイルの調整のための便利クラスなどを定義します。
    5. **Theme**レイヤー: 色とかアプリケーションやサイトが持つ見た目を定義します。実際には配色の組み合わせのパターンを、取り換えを想定して定義します。配色の組み合わせを重視している為、色については他のレイヤーで扱わない考えです。

### CSSの開発に関するファイル構成

1. 機能分けを行います。それぞれを**モジュール**と呼び、その単位でファイルを分割します。
2. 各機能で重複する処理がある場合に、内部共通処理ファイルを用意してそこに記述します。
3. 個々のファイルでレイヤー内の他のファイルに依存しない。レイヤー間の依存は Layout > Component, Project > Component のみ可能とする。Global に対してはどこのレイヤーから参照(依存)しても良い。というかその為の Globalレイヤーです。依存禁止の対応として、内部共通処理ファイルを用意してそこに記述します。これは、相互依存の回避, 依存関係の明確化による影響範囲の把握, 類似処理の集中管理 などです。
4. モジュールの併用には制限があります。故に別モジュールに類似の機能のメンバが存在する事が起こります。それでも依存の制限を重視します。

- 認める例

  ```HTML
  <div class="p-box u-width10">サンプル</div>
  ```

  仮に p-box で幅が指定されていても、u-width10 で上書きする指定を認めます。

- 不適切な例

  ```HTML
  <div class="c-box c-dotted">サンプル</div>
  ```

  競合するプロパティがなくても、併用は禁止します。故にそれを意識して機能分け, レイヤー分けを考えて下さい。

### CSSの開発に関するメンバ構成

1. BEMの構文である Block, Element, Modifier に分類してメンバ(Sassのmixin)を用意します。尚、**BEMの制御区分**を用意する事で、ミックスインの引数の既定値で各分類を実現し、別の値を引数に指定する事で他の分類に転用できる様にします。この辺の制御は共通の関数(セレクタ編集用関数)を用意して行う。

## 補足

- [BEM](https://github.com/juno/bem-methodology-ja/blob/master/definitions.md)は、CSS設計の一つです。
- [FLOCSS](https://github.com/hiloki/flocss)は、CSS設計の一つです。

## 作成者

Copyright(C) 2023-2025 KOUTAN
